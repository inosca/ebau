<h1 class="uk-text-center">{{t "instances.new.title"}}</h1>

<p class="uk-text-center uk-text-large">{{t "instances.new.kind"}}</p>

{{#let (can "create paper instance") as |isPaper|}}
  {{#if isPaper}}
    <div class="uk-flex uk-flex-center uk-margin-large-top">
      <div class="uk-alert uk-alert-warning uk-width-large">
        <strong>{{t "paper.noteTitle"}}</strong> {{t "paper.noteBody"}}
      </div>
    </div>
  {{/if}}

  {{#if this.columns}}
    <div uk-grid class="uk-grid-small uk-child-width-1-1 uk-child-width-1-{{this.columns.length}}@s uk-margin-bottom uk-margin-large-top">
      {{#each this.columns as |category|}}
        {{#let (get this.forms category) as |forms|}}
          <div class="uk-text-center">
            <p class="uk-flex-inline uk-text-large uk-flex-middle">
              {{t (concat "instances.new." category ".title")}}
              {{#if (t (concat "instances.new." category ".info"))}}
                <CfField::info @text={{t (concat "instances.new." category ".info")}} />
              {{/if}}
            </p>
            {{#each forms as |form|}}
              <UkButton
                @width="1-1"
                @label={{concat form.name " " (if isPaper (concat "(" (t "paper.type") ")"))}}
                @color={{if (eq form.slug this.selectedForm) "secondary" "default"}}
                @on-click={{fn (mut this.selectedForm) form.slug}}

                class="uk-margin-small-bottom"
              />
            {{/each}}
          </div>
        {{/let}}
      {{/each}}
    </div>
  {{/if}}

  <div class="uk-text-right">
    <UkButton
      @color="primary"
      @label={{t "global.continue"}}
      @disabled={{or (not this.selectedForm) this.save.isRunning}}
      @loading={{this.save.isRunning}}
      @on-click={{perform save}}
    />
  </div>
{{/let}}
